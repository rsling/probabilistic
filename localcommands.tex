% By LSP.
\renewbibmacro*{index:name}[5]{%
  \usebibmacro{index:entry}{#1}
    {\iffieldundef{usera}{}{\thefield{usera}\actualoperator}\mkbibindexname{#2}{#3}{#4}{#5}}}


% By LSP.
\makeatletter
\def\blx@maxline{77}
\makeatother


% Fix line spacing in list environmens.
\setlist{noitemsep}


% Correct hyperref colors which otherwise give you eye cancer.
\hypersetup{
  linkbordercolor  = {white}
  , linkcolor        = {lsMidDarkBlue}
  , anchorcolor      = {lsMidWine}
  , citecolor        = {lsDarkGreenOne}
  , menucolor        = {lsMidDarkBlue}
  , urlcolor         = {lsDarkOrange}
%    , filecolor       = {}
%    , runcolor        = {}
}


% Use a better mono font, ideal for code.
% https://github.com/chrissimpkins/codeface/tree/master/fonts/inconsolata-g
\setmonofont{Inconsolata-g}


% Use a math font that actually works! Requires unicode-math paackage.
% https://github.com/khaledhosny/libertinus
\setmathfont[Scale=MatchUppercase]{libertinusmath-regular.otf}


% Set listing style. knitr uses RStyle style. Which you have to know...
\definecolor{listingbackground}{gray}{0.95}
\lstdefinestyle{RStyle}{
  language=R,
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\ttfamily\color{lsDarkOrange},
  stringstyle=\ttfamily\color{lsDarkBlue},
  identifierstyle=\ttfamily\color{lsDarkGreenOne},
  commentstyle=\ttfamily\color{lsLightBlue},
  upquote=true,
  breaklines=true,
  backgroundcolor=\color{listingbackground},
  framesep=5mm,
  frame=trlb,
  framerule=0pt,
  linewidth=\dimexpr\textwidth-5mm,
  xleftmargin=5mm
  }
\lstset{style=Rstyle}

\newcommand{\eg}{e.\,g.,\ }
\newcommand{\Eg}{E.\,g.,\ }
\newcommand{\ie}{i.\,e.,\ }
\newcommand{\Ie}{I.\,e.,\ }
\newcommand{\wrt}{w.\,r.\,t.\ }
\newcommand{\Wrt}{W.\,r.\,t.\ }

\newcommand{\Sub}[1]{\ensuremath{_\textrm{#1}}}
\newcommand{\Sup}[1]{\ensuremath{^\textrm{#1}}}
\newcommand{\pPB}{p\Sub{PB}}
\newcommand{\mpPB}{\ensuremath{p_{\textrm{PB}}}}

\newcommand{\RDefArt}{(Chapter~\ref{sec:cliticisationandparadigms})}
\newcommand{\RWeil}{(Chapter~\ref{sec:clausesandphrases})}
\newcommand{\RWeakN}{(Chapter~\ref{sec:paradigmsandprototypes})}
\newcommand{\RMeasure}{(Chapter~\ref{sec:constructionsandprototypes})}

\newcommand{\RADefArt}{Chapter~\ref{sec:cliticisationandparadigms}}
\newcommand{\RAWeil}{Chapter~\ref{sec:clausesandphrases}}
\newcommand{\RAWeakN}{Chapter~\ref{sec:paradigmsandprototypes}}
\newcommand{\RAMeasure}{Chapter~\ref{sec:constructionsandprototypes}}

\newcommand{\RODefArt}{Chapter~\ref{sec:cliticisationandparadigms}}
\newcommand{\ROWeil}{Chapter~\ref{sec:clausesandphrases}}
\newcommand{\ROWeakN}{Chapter~\ref{sec:paradigmsandprototypes}}
\newcommand{\ROMeasure}{Chapter~\ref{sec:constructionsandprototypes}}
